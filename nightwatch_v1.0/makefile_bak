LIBCACHEEX_DIR=/usr/local/pcmalloc
CACHEEX_OBJ=${patsubst %.c,%.o, ${notdir ${wildcard *.c}}}
CACHEEX_CFLAGS=-Wall -lm -g -fPIC -Wformat -lpapi
PAPI_PATH=/usr/local/papi/include
CACHEEX_LIB=${LIBCACHEEX_DIR}/libcacheex.so

all: ${CACHEEX_LIB}

${CACHEEX_LIB} : ${CACHEEX_OBJ}
	${CC} -fPIC -shared -o $@ $^ -ldl -I${PAPI_PATH}
${CACHEEX_PATH}/%.o : %.c
	${CC} -c ${CACHEEX_CFLAGS} $< -o $@


